/*! predictionio-analytics 2013-11-03 */
/* Marco Vito Moscaritolo <mavimo@gmail.com> */
var PIOA=function(a){this._cookiePrefix="__pioa_",this._cookieVersion="1",this._cookieExpiresMs=63072e6,this._Url=a};PIOA.prototype.init=function(){this.initAnalyticsCookie()},PIOA.prototype.getUUID=function(){return this.initAnalyticsCookie()},PIOA.prototype.getCookieName=function(){return this._cookiePrefix+this._cookieVersion},PIOA.prototype.identifyDomain=function(a){var b=new RegExp("([^:]*):?.*").exec(a)[1];if(new RegExp("^((\\d{1,3}\\.){3}\\d{1,3})(:\\d+)?$").exec(b))return b;var c=new RegExp("[^.]*.([^.]*|.....|......)$").exec(b);return c&&c.length>0?"."+c[0]:b},PIOA.prototype.initAnalyticsCookie=function(){var a=this.getCookieName(),b=this.getCookie(a),c=null;if(b)c=b[2];else{c=this.uuid();var d=this.getXmlHttpRequest(),e=this._Url+"?user_create=true&amp;user="+c;d.open("POST",e,!0),d.send()}var f=this.identifyDomain(window.location.host);return this.setCookie(a,c,this._cookieExpiresMs,"/",f),c},PIOA.prototype.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=0|16*Math.random(),c="x"==a?b:8|3&b;return c.toString(16)})},PIOA.prototype.getCookie=function(a){var b=new RegExp("(^|;)[ ]*"+a+"=([^;]*)"),c=b.exec(document.cookie);return c},PIOA.prototype.setCookie=function(a,b,c,d,e,f){var g;c&&(g=new Date,g.setTime(g.getTime()+c)),document.cookie=a+"="+encodeURIComponent(b)+(c?";expires="+g.toGMTString():"")+";path="+(d||"/")+(e?";domain="+e:"")+(f?";secure":"")},PIOA.prototype.getXmlHttpRequest=function(a,b){b=[b="Msxml2.XMLHTTP",b+".3.0",b+".6.0"];do try{return a=b.pop(),new(a?ActiveXObject:XMLHttpRequest)(a)}catch(c){}while(a)},PIOA.prototype.track=function(a){var b=this.getUUID(),c=this.getXmlHttpRequest(),d=this._Url+"?";for(var e in a)d+=e+"="+a[e]+"&amp;";d+="user="+b,c.open("POST",d,!0),c.send()};